<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>GitHub Auth</title>
  </head>
  <body>
    <script>
      (function(){
        try {
          var payload = { type: 'github_auth', ok: {{ ok is defined ? (ok ? 'true' : 'false') : 'true' }} };
          {% if error is defined and error %}
          payload.error = {{ error|json_encode|raw }};
          {% endif %}
          {% if session_id is defined %}
          payload.session_id = {{ session_id|json_encode|raw }};
          {% endif %}
          {% if session_has_token is defined %}
          payload.session_has_token = {{ session_has_token ? 'true':'false' }};
          {% endif %}
          if (window.opener) {
            window.opener.postMessage(payload, '*');
          }
        } catch (e) {}
        setTimeout(function(){ window.close(); }, 100);
      })();
    </script>
    <p>{{ ok is defined and not ok ? 'Authorization failed. You can close this window.' : 'Authorizingâ€¦ you can close this window.' }}</p>
  </body>
  </html>
